{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\davin.DESKTOP-83VQBDE\\\\Documents\\\\restaurant_sidechain\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\davin.DESKTOP-83VQBDE\\\\Documents\\\\restaurant_sidechain\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\davin.DESKTOP-83VQBDE\\\\Documents\\\\restaurant_sidechain\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import ReactDOM from'react-dom';import ReactQrCode from'qrcode-react';import api from'../services/api';import FormOrderQrCode from'./FormOrderQrCode';import FoodOrderPayment from'./FoodOrderPayment';import'../styles.css';function FoodOrderQrCode(props){var foodType=document.location.pathname.split(\"/\")[2];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),food=_useState2[0],setFood=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),order=_useState4[0],setOrder=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),orderstring=_useState6[0],setOrderString=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),transaction=_useState8[0],setTransaction=_useState8[1];useEffect(function(){function loadFood(){return _loadFood.apply(this,arguments);}function _loadFood(){_loadFood=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"loading food\");_context.next=3;return api.get('/foodDetail/'.concat(foodType));case 3:response=_context.sent;food=response.data.response;setFood(food);case 6:case\"end\":return _context.stop();}}},_callee);}));return _loadFood.apply(this,arguments);}loadFood();},[]);function handlePayment(_x){return _handlePayment.apply(this,arguments);}function _handlePayment(){_handlePayment=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:case\"end\":return _context2.stop();}}},_callee2);}));return _handlePayment.apply(this,arguments);}function handleSubmit(_x2){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data){var transaction_result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:data.request_type=foodType;_context3.next=3;return api.post('/storeQrCode',data);case 3:order=_context3.sent;setOrder(order);transaction=order.data.response.transaction;setTransaction(transaction);orderstring=\"recipient=\".concat(order.data.response.qrcode.split(\"&\")[0].split(\"=\")[1]).concat(\"&amount=\").concat(order.data.response.qrcode.split(\"&\")[1].split(\"=\")[1]).concat(\"&food=\").concat(order.data.response.qrcode.split(\"&\")[2].split(\"=\")[1]).concat(\"&foodtype=\").concat(order.data.response.qrcode.split(\"&\")[3].split(\"=\")[1]).concat(\"&timestamp=\").concat(order.data.response.qrcode.split(\"&\")[4].split(\"=\")[1]).concat(\"&username=\").concat(order.data.response.qrcode.split(\"&\")[5].split(\"=\")[1]).concat(\"&phone=\").concat(order.data.response.qrcode.split(\"&\")[6].split(\"=\")[1]).concat(\"&deliveryaddress=\").concat(order.data.qrcode.response.split(\"&\")[7].split(\"=\")[1]);setOrderString(orderstring);transaction_result=/*#__PURE__*/React.createElement(\"div\",{className:\"recipes_topic\"},/*#__PURE__*/React.createElement(\"img\",{src:\"../\".concat(food.img),width:\"200\",height:\"200\",alt:\"\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"p\",null,\"Food description:  \",food.description),/*#__PURE__*/React.createElement(\"p\",null,\"Amount: \",food.amount),/*#__PURE__*/React.createElement(\"p\",null,order.data.status,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"label\",null,\"Point the camera of your phone to the qr code. Once loaded proceed with the payment\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{id:\"divqrcode\"},/*#__PURE__*/React.createElement(\"div\",{id:\"divqrcode\"},/*#__PURE__*/React.createElement(ReactQrCode,{value:order.data.response.qrcode})))),/*#__PURE__*/React.createElement(FoodOrderPayment,{orderstring:order.data.response.orderstring,transaction:transaction,onSubmit:handlePayment}),/*#__PURE__*/React.createElement(\"div\",{className:\"clear\"}));ReactDOM.render(transaction_result,document.getElementById('content'));case 11:case\"end\":return _context3.stop();}}},_callee3);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/React.createElement(\"div\",{id:\"app\"},/*#__PURE__*/React.createElement(\"div\",{id:\"content\",align:\"center\"},/*#__PURE__*/React.createElement(\"img\",{src:\"../\".concat(food.img),width:\"200\",height:\"200\",alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"recipes_topic\"},/*#__PURE__*/React.createElement(\"p\",null,food.food,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"p\",{style:{width:300}},\"Food description: \",food.description),/*#__PURE__*/React.createElement(\"br\",null),\"Amount: \",food.amount),/*#__PURE__*/React.createElement(\"div\",{className:\"clear\"})),/*#__PURE__*/React.createElement(FormOrderQrCode,{onSubmit:handleSubmit})));}export default FoodOrderQrCode;","map":{"version":3,"sources":["C:/Users/davin.DESKTOP-83VQBDE/Documents/restaurant_sidechain/web/src/components/FoodOrderQrCode.js"],"names":["React","useState","useEffect","ReactDOM","ReactQrCode","api","FormOrderQrCode","FoodOrderPayment","FoodOrderQrCode","props","foodType","document","location","pathname","split","food","setFood","order","setOrder","orderstring","setOrderString","transaction","setTransaction","loadFood","console","log","get","concat","response","data","handlePayment","handleSubmit","request_type","post","qrcode","transaction_result","img","description","amount","status","render","getElementById","width"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport ReactQrCode from 'qrcode-react';\r\nimport api from '../services/api';\r\nimport FormOrderQrCode from './FormOrderQrCode';\r\nimport FoodOrderPayment from './FoodOrderPayment';\r\nimport '../styles.css';\r\n\r\nfunction FoodOrderQrCode(props){        \r\n    var foodType = document.location.pathname.split(\"/\")[2];    \r\n\r\n    var [food, setFood] = useState([]);\r\n    var [order, setOrder] = useState([]);\r\n    var [orderstring, setOrderString] = useState('');\r\n    var [transaction, setTransaction] = useState([]);\r\n\r\n    useEffect (() => {\r\n      async function loadFood(){\r\n        console.log(\"loading food\");                    \r\n        const response = await api.get('/foodDetail/'.concat(foodType));\r\n        food = response.data.response;\r\n        setFood(food);        \r\n      }\r\n             \r\n      loadFood();\r\n    }, []);         \r\n\r\n    async function handlePayment(data){\r\n\r\n       //const payment_result = ();\r\n\r\n       //ReactDOM.render(payment_result, document.getElementById('content'));\r\n    }\r\n\r\n    async function handleSubmit(data){\r\n\r\n        data.request_type = foodType;\r\n\r\n        order = await api.post('/storeQrCode', data);           \r\n        setOrder(order);\r\n        \r\n        transaction = order.data.response.transaction;\r\n        setTransaction(transaction);\r\n\r\n        orderstring = \"recipient=\".concat(order.data.response.qrcode.split(\"&\")[0].split(\"=\")[1])\r\n        .concat(\"&amount=\").concat(order.data.response.qrcode.split(\"&\")[1].split(\"=\")[1])\r\n        .concat(\"&food=\").concat(order.data.response.qrcode.split(\"&\")[2].split(\"=\")[1])\r\n        .concat(\"&foodtype=\").concat(order.data.response.qrcode.split(\"&\")[3].split(\"=\")[1])\r\n        .concat(\"&timestamp=\").concat(order.data.response.qrcode.split(\"&\")[4].split(\"=\")[1])\r\n        .concat(\"&username=\").concat(order.data.response.qrcode.split(\"&\")[5].split(\"=\")[1])\r\n        .concat(\"&phone=\").concat(order.data.response.qrcode.split(\"&\")[6].split(\"=\")[1])\r\n        .concat(\"&deliveryaddress=\").concat(order.data.qrcode.response.split(\"&\")[7].split(\"=\")[1]);\r\n        \r\n        setOrderString(orderstring);   \r\n\r\n        const transaction_result = (\r\n            <div className=\"recipes_topic\">    \r\n                <img src={`../${food.img}`} width=\"200\" height=\"200\" alt=\"\" /> \r\n                <br />\r\n                <p>\r\n                Food description:  {food.description} \r\n                </p>\r\n                <p>\r\n                Amount: {food.amount}\r\n                </p>\r\n                <p>\r\n                {order.data.status}                    \r\n                <br/>\r\n                <label>Point the camera of your phone to the qr code. Once loaded proceed with the payment</label>                \r\n                <br/>                \r\n                <div id=\"divqrcode\">\r\n                    <div id=\"divqrcode\">\r\n                        <ReactQrCode value={order.data.response.qrcode}/>\r\n                    </div>              \r\n                </div>     \r\n                </p>\r\n                \r\n                <FoodOrderPayment orderstring={order.data.response.orderstring} transaction={transaction} onSubmit={handlePayment}></FoodOrderPayment>                                    \r\n                <div className=\"clear\"></div>\r\n            </div>\r\n        );\r\n\r\n        ReactDOM.render(transaction_result, document.getElementById('content'));\r\n    }\r\n\r\n    return (\r\n        <div id=\"app\">\r\n            <div id=\"content\" align=\"center\">\r\n                <img src={`../${food.img}`} width=\"200\" height=\"200\" alt=\"\" />\r\n                <div className=\"recipes_topic\">                     \r\n                    <p>\r\n                    {food.food}                    \r\n                    <br />\r\n                    <p style={{width: 300}}>\r\n                    Food description: {food.description}\r\n                    </p>\r\n                    <br/>\r\n                    Amount: {food.amount}\r\n                    </p>\r\n                    <div className=\"clear\"></div>                    \r\n                </div>\r\n                \r\n                <FormOrderQrCode onSubmit={handleSubmit}></FormOrderQrCode>\r\n                    \r\n            </div>            \r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FoodOrderQrCode;"]},"metadata":{},"sourceType":"module"}