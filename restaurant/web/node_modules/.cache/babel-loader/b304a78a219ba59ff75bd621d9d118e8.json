{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\PoC\\\\restaurant_sidechain\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\PoC\\\\restaurant_sidechain\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\PoC\\\\restaurant_sidechain\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import ReactDOM from'react-dom';import api from'../services/api';import FormOrder from'./FormOrder';import'../styles.css';var transactions=require(\"@liskhq/lisk-transactions\");function FoodOrder(props){var foodType=document.location.pathname.split(\"/\")[2];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),food=_useState2[0],setFood=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),order=_useState4[0],setOrder=_useState4[1];useEffect(function(){function loadFood(){return _loadFood.apply(this,arguments);}function _loadFood(){_loadFood=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"loading food\");_context.next=3;return api.get('/foodDetail/'.concat(foodType));case 3:response=_context.sent;food=response.data.response;setFood(food);case 6:case\"end\":return _context.stop();}}},_callee);}));return _loadFood.apply(this,arguments);}loadFood();},[]);function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var transaction_result,_transaction_result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:data.request_type=foodType;data.userid=1;_context2.next=4;return api.post('/userRequest',data);case 4:order=_context2.sent;setOrder(order);if(order.data.status===\"Transaction result\"){transaction_result=/*#__PURE__*/React.createElement(\"div\",{className:\"recipes_topic\"},/*#__PURE__*/React.createElement(\"img\",{src:\"../\".concat(food.img),width:\"200\",height:\"200\",alt:\"\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"p\",null,\"Food description:  \",food.description),/*#__PURE__*/React.createElement(\"p\",null,order.data.status,/*#__PURE__*/React.createElement(\"br\",null),\"Transaction id: \",order.data.response.transaction.id,/*#__PURE__*/React.createElement(\"br\",null),\"Paid Amount: LSK \",transactions.utils.convertBeddowsToLSK(order.data.response.transaction.amount),/*#__PURE__*/React.createElement(\"br\",null),\"Payer address: \",order.data.response.transaction.senderId,/*#__PURE__*/React.createElement(\"br\",null),\"Restaurant address: \",order.data.response.transaction.recipientId,/*#__PURE__*/React.createElement(\"br\",null),\"Broadcast info: \",order.data.response.broadcastInfo.data.message),/*#__PURE__*/React.createElement(\"div\",{className:\"clear\"}));ReactDOM.render(transaction_result,document.getElementById('content'));}else{_transaction_result=/*#__PURE__*/React.createElement(\"div\",{className:\"recipes_topic\"},/*#__PURE__*/React.createElement(\"img\",{src:\"../\".concat(food.img),width:\"200\",height:\"200\",alt:\"\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"p\",null,\"Food description:  \",food.description),/*#__PURE__*/React.createElement(\"p\",null,order.data.status,/*#__PURE__*/React.createElement(\"br\",null),order.data.response.transaction,/*#__PURE__*/React.createElement(\"br\",null),\"Broadcast info: \",order.data.response.broadcastInfo.data.message),/*#__PURE__*/React.createElement(\"div\",{className:\"clear\"}));ReactDOM.render(_transaction_result,document.getElementById('content'));}case 7:case\"end\":return _context2.stop();}}},_callee2);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/React.createElement(\"div\",{id:\"app\"},/*#__PURE__*/React.createElement(\"div\",{id:\"content\",align:\"center\"},/*#__PURE__*/React.createElement(\"img\",{src:\"../\".concat(food.img),width:\"200\",height:\"200\",alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"recipes_topic\"},/*#__PURE__*/React.createElement(\"p\",null,food.food,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"p\",{style:{width:300}},\"Food description: \",food.description),/*#__PURE__*/React.createElement(\"br\",null),\"Amount: \",food.amount),/*#__PURE__*/React.createElement(\"div\",{className:\"clear\"})),/*#__PURE__*/React.createElement(FormOrder,{onSubmit:handleSubmit})));}export default FoodOrder;","map":{"version":3,"sources":["C:/PoC/restaurant_sidechain/web/src/components/FoodOrder.js"],"names":["React","useState","useEffect","ReactDOM","api","FormOrder","transactions","require","FoodOrder","props","foodType","document","location","pathname","split","food","setFood","order","setOrder","loadFood","console","log","get","concat","response","data","handleSubmit","request_type","userid","post","status","transaction_result","img","description","transaction","id","utils","convertBeddowsToLSK","amount","senderId","recipientId","broadcastInfo","message","render","getElementById","width"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport api from '../services/api';\r\nimport FormOrder from './FormOrder';\r\nimport '../styles.css';\r\nconst transactions = require(\"@liskhq/lisk-transactions\");\r\n\r\nfunction FoodOrder(props){        \r\n    var foodType = document.location.pathname.split(\"/\")[2];    \r\n\r\n    var [food, setFood] = useState([]);\r\n    var [order, setOrder] = useState([]);        \r\n\r\n    useEffect (() => {\r\n      async function loadFood(){\r\n        console.log(\"loading food\");                    \r\n        const response = await api.get('/foodDetail/'.concat(foodType));\r\n        food = response.data.response;\r\n        setFood(food);        \r\n      }\r\n        \r\n      loadFood();             \r\n    }, []);    \r\n\r\n    async function handleSubmit(data){\r\n        \r\n        data.request_type = foodType;\r\n        data.userid = 1;                \r\n\r\n        order = await api.post('/userRequest', data);   \r\n        setOrder(order);     \r\n        \r\n        if (order.data.status === \"Transaction result\"){\r\n            const transaction_result = (\r\n                <div className=\"recipes_topic\">    \r\n                    <img src={`../${food.img}`} width=\"200\" height=\"200\" alt=\"\" /> \r\n                    <br />\r\n                    <p>\r\n                    Food description:  {food.description} \r\n                    </p>\r\n                    <p>\r\n                    {order.data.status}                    \r\n                    <br/>\r\n                    Transaction id: {order.data.response.transaction.id}\r\n                    <br/>\r\n                    Paid Amount: LSK {transactions.utils.convertBeddowsToLSK(order.data.response.transaction.amount)}\r\n                    <br/>\r\n                    Payer address: {order.data.response.transaction.senderId}\r\n                    <br/>\r\n                    Restaurant address: {order.data.response.transaction.recipientId}\r\n                    <br/>\r\n                    Broadcast info: {order.data.response.broadcastInfo.data.message}\r\n                    </p>\r\n                    <div className=\"clear\"></div>\r\n                </div>\r\n            );\r\n\r\n            ReactDOM.render(transaction_result, document.getElementById('content'));\r\n        }else{\r\n            const transaction_result = (\r\n                <div className=\"recipes_topic\">    \r\n                    <img src={`../${food.img}`} width=\"200\" height=\"200\" alt=\"\" /> \r\n                    <br />\r\n                    <p>\r\n                    Food description:  {food.description} \r\n                    </p>\r\n                    <p>\r\n                    {order.data.status}\r\n                    <br/>\r\n                    {order.data.response.transaction}\r\n                    <br/>\r\n                    Broadcast info: {order.data.response.broadcastInfo.data.message}\r\n                    </p>\r\n                    <div className=\"clear\"></div>\r\n                </div>\r\n            );\r\n\r\n            ReactDOM.render(transaction_result, document.getElementById('content'));\r\n        }\r\n    }        \r\n\r\n    return (\r\n        <div id=\"app\">\r\n            <div id=\"content\" align=\"center\">\r\n                <img src={`../${food.img}`} width=\"200\" height=\"200\" alt=\"\" />\r\n                <div className=\"recipes_topic\">                     \r\n                    <p>\r\n                    {food.food}                    \r\n                    <br />\r\n                    <p style={{width: 300}}>\r\n                        Food description: {food.description}\r\n                    </p>\r\n                    <br/>\r\n                    Amount: {food.amount}\r\n                    </p>\r\n                    <div className=\"clear\"></div>\r\n                </div>\r\n                <FormOrder onSubmit={handleSubmit}></FormOrder>                \r\n            </div>            \r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FoodOrder;"]},"metadata":{},"sourceType":"module"}