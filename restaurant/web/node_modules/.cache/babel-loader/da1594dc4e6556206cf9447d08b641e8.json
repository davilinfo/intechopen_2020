{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\PoC\\\\restaurant_sidechain\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\PoC\\\\restaurant_sidechain\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\PoC\\\\restaurant_sidechain\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import ReactDOM from'react-dom';import ReactQrCode from'qrcode-react';import api from'../services/api';import FormOrderQrCode from'./FormOrderQrCode';//import FoodOrderPayment from './FoodOrderPayment';\nimport'../styles.css';function FoodOrderQrCode(props){var foodType=document.location.pathname.split(\"/\")[2];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),food=_useState2[0],setFood=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),order=_useState4[0],setOrder=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),orderstring=_useState6[0],setOrderString=_useState6[1];useEffect(function(){function loadFood(){return _loadFood.apply(this,arguments);}function _loadFood(){_loadFood=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"loading food\");_context.next=3;return api.get('/foodDetail/'.concat(foodType));case 3:response=_context.sent;food=response.data.response;setFood(food);case 6:case\"end\":return _context.stop();}}},_callee);}));return _loadFood.apply(this,arguments);}loadFood();},[]);function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var transaction_result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:data.request_type=foodType;_context2.next=3;return api.post('/storeQrCode',data);case 3:order=_context2.sent;setOrder(order);orderstring=encodeURI(\"recipient=\".concat(order.data.response.split(\"&\")[0].split(\"=\")[1]).concat(\"&amount=\").concat(order.data.response.split(\"&\")[1].split(\"=\")[1]).concat(\"&food=\").concat(order.data.response.split(\"&\")[2].split(\"=\")[1]).concat(\"&foodtype=\").concat(order.data.response.split(\"&\")[3].split(\"=\")[1]).concat(\"&timestamp=\").concat(order.data.response.split(\"&\")[4].split(\"=\")[1]).concat(\"&username=\").concat(order.data.response.split(\"&\")[5].split(\"=\")[1]).concat(\"&phone=\").concat(order.data.response.split(\"&\")[6].split(\"=\")[1]).concat(\"&deliveryaddress=\").concat(order.data.response.split(\"&\")[7].split(\"=\")[1]).concat(\"&observation=\").concat(order.data.response.split(\"&\")[8]!==undefined?order.data.response.split(\"&\")[8].split(\"=\")[1]:\"\"));setOrderString(orderstring);transaction_result=/*#__PURE__*/React.createElement(\"div\",{className:\"recipes_topic\"},/*#__PURE__*/React.createElement(\"img\",{src:\"../\".concat(food.img),width:\"200\",height:\"200\",alt:\"\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"p\",null,\"Food description: \",food.description),/*#__PURE__*/React.createElement(\"p\",null,\"Amount: \",food.amount),/*#__PURE__*/React.createElement(\"br\",null),order.data.status,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"label\",null,\"Point the camera of your phone to the qr code. Once loaded proceed with the payment\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{id:\"divqrcode\"},/*#__PURE__*/React.createElement(\"div\",{id:\"divqrcode\"},/*#__PURE__*/React.createElement(ReactQrCode,{value:order.data.response}))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"a\",{href:\"/FoodOrderPayment?\".concat(orderstring),querystring:\"\".concat(orderstring)},\"Or proceed with direct payment here\"),/*#__PURE__*/React.createElement(\"div\",{className:\"clear\"}));ReactDOM.render(transaction_result,document.getElementById('content'));case 9:case\"end\":return _context2.stop();}}},_callee2);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/React.createElement(\"div\",{id:\"app\"},/*#__PURE__*/React.createElement(\"div\",{id:\"content\",align:\"center\"},/*#__PURE__*/React.createElement(\"img\",{src:\"../\".concat(food.img),width:\"200\",height:\"200\",alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"recipes_topic\"},food.food,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"p\",{style:{width:300}},\"Food description: \",food.description),\"Amount: \",food.amount,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"clear\"})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(FormOrderQrCode,{onSubmit:handleSubmit})));}export default FoodOrderQrCode;","map":{"version":3,"sources":["C:/PoC/restaurant_sidechain/web/src/components/FoodOrderQrCode.js"],"names":["React","useState","useEffect","ReactDOM","ReactQrCode","api","FormOrderQrCode","FoodOrderQrCode","props","foodType","document","location","pathname","split","food","setFood","order","setOrder","orderstring","setOrderString","loadFood","console","log","get","concat","response","data","handleSubmit","request_type","post","encodeURI","undefined","transaction_result","img","description","amount","status","render","getElementById","width"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport ReactQrCode from 'qrcode-react';\r\nimport api from '../services/api';\r\nimport FormOrderQrCode from './FormOrderQrCode';\r\n//import FoodOrderPayment from './FoodOrderPayment';\r\nimport '../styles.css';\r\n\r\nfunction FoodOrderQrCode(props){        \r\n    var foodType = document.location.pathname.split(\"/\")[2];    \r\n\r\n    var [food, setFood] = useState([]);\r\n    var [order, setOrder] = useState([]);\r\n    var [orderstring, setOrderString] = useState('');    \r\n\r\n    useEffect (() => {\r\n      async function loadFood(){\r\n        console.log(\"loading food\");                    \r\n        const response = await api.get('/foodDetail/'.concat(foodType));\r\n        food = response.data.response;\r\n        setFood(food);        \r\n      }\r\n             \r\n      loadFood();\r\n    }, []);             \r\n\r\n    async function handleSubmit(data){\r\n        \r\n        data.request_type = foodType;\r\n\r\n        order = await api.post('/storeQrCode', data);           \r\n        setOrder(order);             \r\n\r\n        orderstring = encodeURI(\"recipient=\".concat(order.data.response.split(\"&\")[0].split(\"=\")[1])\r\n        .concat(\"&amount=\").concat(order.data.response.split(\"&\")[1].split(\"=\")[1])\r\n        .concat(\"&food=\").concat(order.data.response.split(\"&\")[2].split(\"=\")[1])\r\n        .concat(\"&foodtype=\").concat(order.data.response.split(\"&\")[3].split(\"=\")[1])\r\n        .concat(\"&timestamp=\").concat(order.data.response.split(\"&\")[4].split(\"=\")[1])\r\n        .concat(\"&username=\").concat(order.data.response.split(\"&\")[5].split(\"=\")[1])\r\n        .concat(\"&phone=\").concat(order.data.response.split(\"&\")[6].split(\"=\")[1])\r\n        .concat(\"&deliveryaddress=\").concat(order.data.response.split(\"&\")[7].split(\"=\")[1])\r\n        .concat(\"&observation=\").concat(\r\n            order.data.response.split(\"&\")[8] !== undefined ?\r\n            order.data.response.split(\"&\")[8].split(\"=\")[1]:\r\n            \"\"));\r\n        \r\n        setOrderString(orderstring);   \r\n\r\n        const transaction_result = (\r\n            <div className=\"recipes_topic\">    \r\n                <img src={`../${food.img}`} width=\"200\" height=\"200\" alt=\"\" /> \r\n                <br />\r\n                <p>\r\n                Food description: {food.description} \r\n                </p>\r\n                <p>\r\n                Amount: {food.amount}\r\n                </p>\r\n                <br/>\r\n                {order.data.status}                    \r\n                <br/>\r\n                <label>Point the camera of your phone to the qr code. Once loaded proceed with the payment</label>                \r\n                <br/>                \r\n                <div id=\"divqrcode\">\r\n                    <div id=\"divqrcode\">\r\n                        <ReactQrCode value={order.data.response}/>\r\n                    </div>              \r\n                </div>                     \r\n                \r\n                <br/>\r\n                <a href={`/FoodOrderPayment?${orderstring}`} querystring={`${orderstring}`}>Or proceed with direct payment here</a>                \r\n                \r\n                <div className=\"clear\"></div>\r\n            </div>\r\n        );\r\n\r\n        ReactDOM.render(transaction_result, document.getElementById('content'));\r\n    }\r\n\r\n    return (\r\n        <div id=\"app\">\r\n            <div id=\"content\" align=\"center\">\r\n                <img src={`../${food.img}`} width=\"200\" height=\"200\" alt=\"\" />\r\n                <div className=\"recipes_topic\">                                         \r\n                    {food.food}                    \r\n                    <br />\r\n                    <p style={{width: 300}}>\r\n                    Food description: {food.description}                    \r\n                    </p>                                \r\n                    Amount: {food.amount}        \r\n                    <br/>\r\n                    <div className=\"clear\"></div>                    \r\n                </div>\r\n                <br/>\r\n                <FormOrderQrCode onSubmit={handleSubmit}></FormOrderQrCode>\r\n                    \r\n            </div>            \r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FoodOrderQrCode;"]},"metadata":{},"sourceType":"module"}