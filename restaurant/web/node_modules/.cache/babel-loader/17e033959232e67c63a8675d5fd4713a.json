{"ast":null,"code":"\"use strict\";\n\nvar _toConsumableArray = require(\"C:\\\\PoC\\\\restaurant_sidechain\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/toConsumableArray\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _3_vote_transaction_1 = require(\"./3_vote_transaction\");\n\nvar constants_1 = require(\"./constants\");\n\nvar utils_1 = require(\"./utils\");\n\nvar validateInputs = function validateInputs(_ref) {\n  var _ref$votes = _ref.votes,\n      votes = _ref$votes === void 0 ? [] : _ref$votes,\n      _ref$unvotes = _ref.unvotes,\n      unvotes = _ref$unvotes === void 0 ? [] : _ref$unvotes;\n\n  if (!Array.isArray(votes)) {\n    throw new Error('Please provide a valid votes value. Expected an array if present.');\n  }\n\n  if (!Array.isArray(unvotes)) {\n    throw new Error('Please provide a valid unvotes value. Expected an array if present.');\n  }\n\n  utils_1.validatePublicKeys([].concat(_toConsumableArray(votes), _toConsumableArray(unvotes)));\n};\n\nexports.castVotes = function (inputs) {\n  validateInputs(inputs);\n  var passphrase = inputs.passphrase,\n      secondPassphrase = inputs.secondPassphrase,\n      _inputs$votes = inputs.votes,\n      votes = _inputs$votes === void 0 ? [] : _inputs$votes,\n      _inputs$unvotes = inputs.unvotes,\n      unvotes = _inputs$unvotes === void 0 ? [] : _inputs$unvotes;\n  var plusPrependedVotes = utils_1.prependPlusToPublicKeys(votes);\n  var minusPrependedUnvotes = utils_1.prependMinusToPublicKeys(unvotes);\n  var allVotes = [].concat(_toConsumableArray(plusPrependedVotes), _toConsumableArray(minusPrependedUnvotes));\n  var transaction = Object.assign({}, utils_1.createBaseTransaction(inputs), {\n    type: 3,\n    fee: constants_1.VOTE_FEE.toString(),\n    asset: {\n      votes: allVotes\n    }\n  });\n\n  if (!passphrase) {\n    return transaction;\n  }\n\n  var transactionWithSenderInfo = Object.assign({}, transaction, {\n    senderId: transaction.senderId,\n    senderPublicKey: transaction.senderPublicKey,\n    recipientId: transaction.senderId,\n    recipientPublicKey: transaction.senderPublicKey\n  });\n  var voteTransaction = new _3_vote_transaction_1.VoteTransaction(transactionWithSenderInfo);\n  voteTransaction.sign(passphrase, secondPassphrase);\n  return voteTransaction.toJSON();\n};","map":{"version":3,"sources":["../src/3_cast_votes.ts"],"names":[],"mappings":";;;;;;;;AAcA,IAAA,qBAAA,GAAA,OAAA,CAAA,sBAAA,CAAA;;AACA,IAAA,WAAA,GAAA,OAAA,CAAA,aAAA,CAAA;;AAEA,IAAA,OAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AAoBA,IAAM,cAAc,GAAG,SAAjB,cAAiB,OAAoD;AAAA,wBAAjD,KAAiD;AAAA,MAAjD,KAAiD,2BAAzC,EAAyC;AAAA,0BAArC,OAAqC;AAAA,MAArC,OAAqC,6BAA3B,EAA2B;;AAC1E,MAAI,CAAC,KAAK,CAAC,OAAN,CAAc,KAAd,CAAL,EAA2B;AAC1B,UAAM,IAAI,KAAJ,CACL,mEADK,CAAN;AAGA;;AACD,MAAI,CAAC,KAAK,CAAC,OAAN,CAAc,OAAd,CAAL,EAA6B;AAC5B,UAAM,IAAI,KAAJ,CACL,qEADK,CAAN;AAGA;;AAED,EAAA,OAAA,CAAA,kBAAA,8BAAuB,KAAvB,sBAAiC,OAAjC;AACA,CAbD;;AAea,OAAA,CAAA,SAAA,GAAY,UAAC,MAAD,EAAqD;AAC7E,EAAA,cAAc,CAAC,MAAD,CAAd;AAD6E,MAErE,UAFqE,GAEV,MAFU,CAErE,UAFqE;AAAA,MAEzD,gBAFyD,GAEV,MAFU,CAEzD,gBAFyD;AAAA,sBAEV,MAFU,CAEvC,KAFuC;AAAA,MAEvC,KAFuC,8BAE/B,EAF+B;AAAA,wBAEV,MAFU,CAE3B,OAF2B;AAAA,MAE3B,OAF2B,gCAEjB,EAFiB;AAI7E,MAAM,kBAAkB,GAAG,OAAA,CAAA,uBAAA,CAAwB,KAAxB,CAA3B;AACA,MAAM,qBAAqB,GAAG,OAAA,CAAA,wBAAA,CAAyB,OAAzB,CAA9B;AACA,MAAM,QAAQ,gCACV,kBADU,sBAEV,qBAFU,EAAd;AAKA,MAAM,WAAW,GAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EACb,OAAA,CAAA,qBAAA,CAAsB,MAAtB,CADa,EACgB;AAChC,IAAA,IAAI,EAAE,CAD0B;AAEhC,IAAA,GAAG,EAAE,WAAA,CAAA,QAAA,CAAS,QAAT,EAF2B;AAGhC,IAAA,KAAK,EAAE;AACN,MAAA,KAAK,EAAE;AADD;AAHyB,GADhB,CAAjB;;AASA,MAAI,CAAC,UAAL,EAAiB;AAChB,WAAO,WAAP;AACA;;AAED,MAAM,yBAAyB,GAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAC3B,WAD2B,EAChB;AAEd,IAAA,QAAQ,EAAE,WAAW,CAAC,QAFR;AAGd,IAAA,eAAe,EAAE,WAAW,CAAC,eAHf;AAId,IAAA,WAAW,EAAE,WAAW,CAAC,QAJX;AAKd,IAAA,kBAAkB,EAAE,WAAW,CAAC;AALlB,GADgB,CAA/B;AASA,MAAM,eAAe,GAAG,IAAI,qBAAA,CAAA,eAAJ,CAAoB,yBAApB,CAAxB;AACA,EAAA,eAAe,CAAC,IAAhB,CAAqB,UAArB,EAAiC,gBAAjC;AAEA,SAAO,eAAe,CAAC,MAAhB,EAAP;AACA,CArCY","sourceRoot":"","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst _3_vote_transaction_1 = require(\"./3_vote_transaction\");\r\nconst constants_1 = require(\"./constants\");\r\nconst utils_1 = require(\"./utils\");\r\nconst validateInputs = ({ votes = [], unvotes = [] }) => {\r\n    if (!Array.isArray(votes)) {\r\n        throw new Error('Please provide a valid votes value. Expected an array if present.');\r\n    }\r\n    if (!Array.isArray(unvotes)) {\r\n        throw new Error('Please provide a valid unvotes value. Expected an array if present.');\r\n    }\r\n    utils_1.validatePublicKeys([...votes, ...unvotes]);\r\n};\r\nexports.castVotes = (inputs) => {\r\n    validateInputs(inputs);\r\n    const { passphrase, secondPassphrase, votes = [], unvotes = [] } = inputs;\r\n    const plusPrependedVotes = utils_1.prependPlusToPublicKeys(votes);\r\n    const minusPrependedUnvotes = utils_1.prependMinusToPublicKeys(unvotes);\r\n    const allVotes = [\r\n        ...plusPrependedVotes,\r\n        ...minusPrependedUnvotes,\r\n    ];\r\n    const transaction = Object.assign({}, utils_1.createBaseTransaction(inputs), { type: 3, fee: constants_1.VOTE_FEE.toString(), asset: {\r\n            votes: allVotes,\r\n        } });\r\n    if (!passphrase) {\r\n        return transaction;\r\n    }\r\n    const transactionWithSenderInfo = Object.assign({}, transaction, { senderId: transaction.senderId, senderPublicKey: transaction.senderPublicKey, recipientId: transaction.senderId, recipientPublicKey: transaction.senderPublicKey });\r\n    const voteTransaction = new _3_vote_transaction_1.VoteTransaction(transactionWithSenderInfo);\r\n    voteTransaction.sign(passphrase, secondPassphrase);\r\n    return voteTransaction.toJSON();\r\n};\r\n//# sourceMappingURL=3_cast_votes.js.map"]},"metadata":{},"sourceType":"script"}