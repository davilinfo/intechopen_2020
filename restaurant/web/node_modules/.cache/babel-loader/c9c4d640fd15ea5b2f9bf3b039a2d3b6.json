{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\davin.DESKTOP-83VQBDE\\\\Documents\\\\restaurant_sidechain\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\davin.DESKTOP-83VQBDE\\\\Documents\\\\restaurant_sidechain\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\davin.DESKTOP-83VQBDE\\\\Documents\\\\restaurant_sidechain\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import ReactDOM from'react-dom';import api from'../services/api';import FormPayment from'./FormPayment';import'../styles.css';var transactions=require(\"@liskhq/lisk-transactions\");function FoodOrderPayment(props){var orderstring=props.orderstring;if(orderstring!==null&&orderstring!==undefined){orderstring=orderstring.split(\"&\");var food={};food.recipientAddress=orderstring[0].split('=')[1];food.amount=orderstring[1].split('=')[1];food.name=orderstring[2].split('=')[1];food.foodtype=orderstring[3].split('=')[1];food.timestamp=orderstring[4].split('=')[1];food.username=orderstring[5].split('=')[1];food.phone=orderstring[6].split('=')[1];food.deliveryaddress=orderstring[7].split('=')[1];}var _useState=useState([]),_useState2=_slicedToArray(_useState,2),txFood=_useState2[0],setTransaction=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),order=_useState4[0],setOrder=_useState4[1];txFood=props.transaction;function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var transaction_result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:txFood.sign(data);/*\r\n        const txFood = new FoodRequest({\r\n            asset: {\r\n                name: food.name,\r\n                description: food.description,\r\n                username: food.username,\r\n                phone: food.phone,\r\n                deliveryaddress: food.deliveryaddress,\r\n                foodType: food.foodtype\r\n            },\r\n            amount: food.amount,\r\n            recipientId: food.recipientAddress, //restaurant lisk address\r\n            timestamp: food.timestamp\r\n        });\r\n            \r\n        console.log(data);    \r\n        console.log(txFood);\r\n\r\n        try{\r\n            txFood.sign(data);\r\n        }catch(e){\r\n            console.log(e);\r\n        }*/_context.next=3;return api.post('/payment',JSON.stringify({transaction:txFood,networkid:\"identifier\"}));case 3:order=_context.sent;setOrder(order);/*const transaction_result = (\r\n            <div className=\"recipes_topic\">                    \r\n                Testing             \r\n                <div className=\"clear\"></div>\r\n            </div>\r\n        )*/transaction_result=/*#__PURE__*/React.createElement(\"div\",{className:\"recipes_topic\"},\"Transaction result: \",order.data.status,/*#__PURE__*/React.createElement(\"br\",null),\"Transaction id: \",order.data.response.transaction.id,/*#__PURE__*/React.createElement(\"br\",null),\"Paid Amount: LSK \",transactions.utils.convertBeddowsToLSK(order.data.response.transaction.amount),/*#__PURE__*/React.createElement(\"br\",null),\"Payer LSK address: \",order.data.response.transaction.senderId,/*#__PURE__*/React.createElement(\"br\",null),\"Restaurant LSK address: \",order.data.response.transaction.recipientId,/*#__PURE__*/React.createElement(\"br\",null),\"Broadcast info: \",order.data.response.broadcastInfo.data.message,/*#__PURE__*/React.createElement(\"div\",{className:\"clear\"}));ReactDOM.render(transaction_result,document.getElementById('content'));case 7:case\"end\":return _context.stop();}}},_callee);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/React.createElement(\"div\",{id:\"app\"},/*#__PURE__*/React.createElement(\"div\",{id:\"content\",align:\"center\"},/*#__PURE__*/React.createElement(FormPayment,{onSubmit:handleSubmit})));}export default FoodOrderPayment;","map":{"version":3,"sources":["C:/Users/davin.DESKTOP-83VQBDE/Documents/restaurant_sidechain/web/src/components/FoodOrderPayment.js"],"names":["React","useState","useEffect","ReactDOM","api","FormPayment","transactions","require","FoodOrderPayment","props","orderstring","undefined","split","food","recipientAddress","amount","name","foodtype","timestamp","username","phone","deliveryaddress","txFood","setTransaction","order","setOrder","transaction","handleSubmit","data","sign","post","JSON","stringify","networkid","transaction_result","status","response","id","utils","convertBeddowsToLSK","senderId","recipientId","broadcastInfo","message","render","document","getElementById"],"mappings":"mkBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,QAAP,KAAqB,WAArB,CACA,MAAOC,CAAAA,GAAP,KAAgB,iBAAhB,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CACA,MAAO,eAAP,CAEA,GAAMC,CAAAA,YAAY,CAAGC,OAAO,CAAC,2BAAD,CAA5B,CAEA,QAASC,CAAAA,gBAAT,CAA0BC,KAA1B,CAAgC,CAC5B,GAAIC,CAAAA,WAAW,CAAGD,KAAK,CAACC,WAAxB,CACA,GAAIA,WAAW,GAAK,IAAhB,EAAwBA,WAAW,GAAKC,SAA5C,CAAsD,CAClDD,WAAW,CAAGA,WAAW,CAACE,KAAZ,CAAkB,GAAlB,CAAd,CAEA,GAAIC,CAAAA,IAAI,CAAG,EAAX,CACAA,IAAI,CAACC,gBAAL,CAAwBJ,WAAW,CAAC,CAAD,CAAX,CAAeE,KAAf,CAAqB,GAArB,EAA0B,CAA1B,CAAxB,CACAC,IAAI,CAACE,MAAL,CAAcL,WAAW,CAAC,CAAD,CAAX,CAAeE,KAAf,CAAqB,GAArB,EAA0B,CAA1B,CAAd,CACAC,IAAI,CAACG,IAAL,CAAYN,WAAW,CAAC,CAAD,CAAX,CAAeE,KAAf,CAAqB,GAArB,EAA0B,CAA1B,CAAZ,CACAC,IAAI,CAACI,QAAL,CAAgBP,WAAW,CAAC,CAAD,CAAX,CAAeE,KAAf,CAAqB,GAArB,EAA0B,CAA1B,CAAhB,CACAC,IAAI,CAACK,SAAL,CAAiBR,WAAW,CAAC,CAAD,CAAX,CAAeE,KAAf,CAAqB,GAArB,EAA0B,CAA1B,CAAjB,CACAC,IAAI,CAACM,QAAL,CAAgBT,WAAW,CAAC,CAAD,CAAX,CAAeE,KAAf,CAAqB,GAArB,EAA0B,CAA1B,CAAhB,CACAC,IAAI,CAACO,KAAL,CAAaV,WAAW,CAAC,CAAD,CAAX,CAAeE,KAAf,CAAqB,GAArB,EAA0B,CAA1B,CAAb,CACAC,IAAI,CAACQ,eAAL,CAAuBX,WAAW,CAAC,CAAD,CAAX,CAAeE,KAAf,CAAqB,GAArB,EAA0B,CAA1B,CAAvB,CACH,CAd2B,cAeGX,QAAQ,CAAC,EAAD,CAfX,wCAevBqB,MAfuB,eAefC,cAfe,8BAgBJtB,QAAQ,CAAC,EAAD,CAhBJ,yCAgBvBuB,KAhBuB,eAgBhBC,QAhBgB,eAkB5BH,MAAM,CAAGb,KAAK,CAACiB,WAAf,CAlB4B,QAoBbC,CAAAA,YApBa,gJAoB5B,iBAA4BC,IAA5B,yIAEIN,MAAM,CAACO,IAAP,CAAYD,IAAZ,EAEA;;;;;;;;;;;;;;;;;;;;;;WAJJ,sBA4BkBxB,CAAAA,GAAG,CAAC0B,IAAJ,CAAS,UAAT,CAAqBC,IAAI,CAACC,SAAL,CAAe,CAAEN,WAAW,CAAEJ,MAAf,CAAuBW,SAAS,CAAE,YAAlC,CAAf,CAArB,CA5BlB,QA4BIT,KA5BJ,eA6BIC,QAAQ,CAACD,KAAD,CAAR,CAEA;;;;;WAOMU,kBAtCV,cAuCQ,2BAAK,SAAS,CAAC,eAAf,yBACyBV,KAAK,CAACI,IAAN,CAAWO,MADpC,cAEI,8BAFJ,oBAGqBX,KAAK,CAACI,IAAN,CAAWQ,QAAX,CAAoBV,WAApB,CAAgCW,EAHrD,cAII,8BAJJ,qBAKsB/B,YAAY,CAACgC,KAAb,CAAmBC,mBAAnB,CAAuCf,KAAK,CAACI,IAAN,CAAWQ,QAAX,CAAoBV,WAApB,CAAgCX,MAAvE,CALtB,cAMI,8BANJ,uBAOwBS,KAAK,CAACI,IAAN,CAAWQ,QAAX,CAAoBV,WAApB,CAAgCc,QAPxD,cAQI,8BARJ,4BAS6BhB,KAAK,CAACI,IAAN,CAAWQ,QAAX,CAAoBV,WAApB,CAAgCe,WAT7D,cAUI,8BAVJ,oBAWqBjB,KAAK,CAACI,IAAN,CAAWQ,QAAX,CAAoBM,aAApB,CAAkCd,IAAlC,CAAuCe,OAX5D,cAYI,2BAAK,SAAS,CAAC,OAAf,EAZJ,CAvCR,CAuDIxC,QAAQ,CAACyC,MAAT,CAAgBV,kBAAhB,CAAoCW,QAAQ,CAACC,cAAT,CAAwB,SAAxB,CAApC,EAvDJ,sDApB4B,+CA8E5B,mBACI,2BAAK,EAAE,CAAC,KAAR,eACI,2BAAK,EAAE,CAAC,SAAR,CAAkB,KAAK,CAAC,QAAxB,eACI,oBAAC,WAAD,EAAa,QAAQ,CAAEnB,YAAvB,EADJ,CADJ,CADJ,CAOH,CAED,cAAenB,CAAAA,gBAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport api from '../services/api';\r\nimport FormPayment from './FormPayment';\r\nimport '../styles.css';\r\n\r\nconst transactions = require(\"@liskhq/lisk-transactions\");\r\n\r\nfunction FoodOrderPayment(props){               \r\n    var orderstring = props.orderstring;\r\n    if (orderstring !== null && orderstring !== undefined){    \r\n        orderstring = orderstring.split(\"&\");\r\n\r\n        var food = {};\r\n        food.recipientAddress = orderstring[0].split('=')[1];\r\n        food.amount = orderstring[1].split('=')[1];\r\n        food.name = orderstring[2].split('=')[1];\r\n        food.foodtype = orderstring[3].split('=')[1];\r\n        food.timestamp = orderstring[4].split('=')[1];\r\n        food.username = orderstring[5].split('=')[1];\r\n        food.phone = orderstring[6].split('=')[1];\r\n        food.deliveryaddress = orderstring[7].split('=')[1];        \r\n    }\r\n    var [txFood, setTransaction] = useState([]);\r\n    var [order, setOrder] = useState([]);   \r\n    \r\n    txFood = props.transaction;\r\n\r\n    async function handleSubmit(data){      \r\n        \r\n        txFood.sign(data);\r\n        \r\n        /*\r\n        const txFood = new FoodRequest({\r\n            asset: {\r\n                name: food.name,\r\n                description: food.description,\r\n                username: food.username,\r\n                phone: food.phone,\r\n                deliveryaddress: food.deliveryaddress,\r\n                foodType: food.foodtype\r\n            },\r\n            amount: food.amount,\r\n            recipientId: food.recipientAddress, //restaurant lisk address\r\n            timestamp: food.timestamp\r\n        });\r\n            \r\n        console.log(data);    \r\n        console.log(txFood);\r\n\r\n        try{\r\n            txFood.sign(data);\r\n        }catch(e){\r\n            console.log(e);\r\n        }*/\r\n        \r\n        order = await api.post('/payment', JSON.stringify({ transaction: txFood, networkid: \"identifier\"}) );   \r\n        setOrder(order);    \r\n        \r\n        /*const transaction_result = (\r\n            <div className=\"recipes_topic\">                    \r\n                Testing             \r\n                <div className=\"clear\"></div>\r\n            </div>\r\n        )*/\r\n\r\n        const transaction_result = (\r\n            <div className=\"recipes_topic\">                    \r\n                Transaction result: {order.data.status}\r\n                <br />\r\n                Transaction id: {order.data.response.transaction.id}\r\n                <br/>\r\n                Paid Amount: LSK {transactions.utils.convertBeddowsToLSK(order.data.response.transaction.amount)}\r\n                <br/>\r\n                Payer LSK address: {order.data.response.transaction.senderId}\r\n                <br/>\r\n                Restaurant LSK address: {order.data.response.transaction.recipientId}\r\n                <br/>\r\n                Broadcast info: {order.data.response.broadcastInfo.data.message}                \r\n                <div className=\"clear\"></div>\r\n            </div>\r\n        );\r\n\r\n        ReactDOM.render(transaction_result, document.getElementById('content'));        \r\n    }        \r\n\r\n    return (\r\n        <div id=\"app\">\r\n            <div id=\"content\" align=\"center\">                \r\n                <FormPayment onSubmit={handleSubmit}></FormPayment>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FoodOrderPayment;"]},"metadata":{},"sourceType":"module"}