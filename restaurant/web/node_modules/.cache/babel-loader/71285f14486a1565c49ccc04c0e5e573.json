{"ast":null,"code":"'use strict';\n\nvar equal = require('deep-equal');\n\nfunction arrayEquals(before, after) {\n  if (before.length !== after.length) {\n    return false;\n  }\n\n  for (var i = 0; i < before.length; i++) {\n    if (!equal(after[i], before[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nmodule.exports = function generate(before, after) {\n  if (before === null || after === null || typeof before !== 'object' || typeof after !== 'object' || Array.isArray(before) !== Array.isArray(after)) {\n    return after;\n  }\n\n  if (Array.isArray(before)) {\n    if (!arrayEquals(before, after)) {\n      return after;\n    }\n\n    return undefined;\n  }\n\n  var patch = {};\n  var beforeKeys = Object.keys(before);\n  var afterKeys = Object.keys(after);\n  var key, i; // new elements\n\n  var newKeys = {};\n\n  for (i = 0; i < afterKeys.length; i++) {\n    key = afterKeys[i];\n\n    if (beforeKeys.indexOf(key) === -1) {\n      newKeys[key] = true;\n      patch[key] = after[key];\n    }\n  } // removed & modified elements\n\n\n  var removedKeys = {};\n\n  for (i = 0; i < beforeKeys.length; i++) {\n    key = beforeKeys[i];\n\n    if (afterKeys.indexOf(key) === -1) {\n      removedKeys[key] = true;\n      patch[key] = null;\n    } else {\n      if (before[key] !== null && typeof before[key] === 'object') {\n        var subPatch = generate(before[key], after[key]);\n\n        if (subPatch !== undefined) {\n          patch[key] = subPatch;\n        }\n      } else if (before[key] !== after[key]) {\n        patch[key] = after[key];\n      }\n    }\n  }\n\n  return Object.keys(patch).length > 0 ? patch : undefined;\n};","map":{"version":3,"sources":["C:/PoC/restaurant_sidechain/web/node_modules/json-merge-patch/lib/generate.js"],"names":["equal","require","arrayEquals","before","after","length","i","module","exports","generate","Array","isArray","undefined","patch","beforeKeys","Object","keys","afterKeys","key","newKeys","indexOf","removedKeys","subPatch"],"mappings":"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","sourcesContent":["'use strict';\r\n\r\nvar equal = require('deep-equal');\r\n\r\nfunction arrayEquals(before, after) {\r\n  if(before.length !== after.length) {\r\n    return false;\r\n  }\r\n  for(var i=0; i<before.length; i++) {\r\n    if(!equal(after[i], before[i])) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nmodule.exports = function generate(before, after) {\r\n  if(before === null || after === null ||\r\n    typeof before !== 'object' || typeof after !== 'object' ||\r\n    Array.isArray(before) !== Array.isArray(after)) {\r\n    return after;\r\n  }\r\n\r\n  if(Array.isArray(before)) {\r\n    if(!arrayEquals(before, after)) {\r\n      return after;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  var patch = {};\r\n  var beforeKeys = Object.keys(before);\r\n  var afterKeys = Object.keys(after);\r\n\r\n  var key, i;\r\n\r\n  // new elements\r\n  var newKeys = {};\r\n  for(i=0; i < afterKeys.length; i++) {\r\n    key = afterKeys[i];\r\n    if(beforeKeys.indexOf(key) === -1) {\r\n      newKeys[key] = true;\r\n      patch[key] = after[key];\r\n    }\r\n  }\r\n\r\n  // removed & modified elements\r\n  var removedKeys = {};\r\n  for(i=0; i < beforeKeys.length; i++) {\r\n    key = beforeKeys[i];\r\n    if(afterKeys.indexOf(key) === -1) {\r\n      removedKeys[key] = true;\r\n      patch[key] = null;\r\n    } else {\r\n      if(before[key] !== null && typeof before[key] === 'object') {\r\n        var subPatch = generate(before[key], after[key]);\r\n        if(subPatch !== undefined) {\r\n          patch[key] = subPatch;\r\n        }\r\n      } else if(before[key] !== after[key]) {\r\n        patch[key] = after[key];\r\n      }\r\n    }\r\n  }\r\n\r\n  return (Object.keys(patch).length > 0 ? patch : undefined);\r\n};\r\n"]},"metadata":{},"sourceType":"script"}