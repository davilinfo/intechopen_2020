{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\PoC\\\\restaurant_sidechain\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\PoC\\\\restaurant_sidechain\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\PoC\\\\restaurant_sidechain\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'../styles.css';import api from'../services/api';var cryptography=require('@liskhq/lisk-cryptography');function FormReservation(_ref){var onSubmit=_ref.onSubmit;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),transactionId=_useState2[0],setTransaction=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),phone=_useState4[0],setPhone=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),passphrase=_useState6[0],setPassphrase=_useState6[1];function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var address,foodRequest,clientData,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();address=cryptography.getAddressFromPassphrase(passphrase);_context.next=4;return api.post('/transaction',{transactionId:transactionId,phone:phone,address:address});case 4:foodRequest=_context.sent;console.log(foodRequest.data.response.data.length);console.log(foodRequest.data.response.data[0].asset.clientNonce);console.log(foodRequest.data.response.data[0].asset.clientData);console.log(cryptography.bufferToHex(foodRequest.data.response.data[0].asset.clientData));clientData=foodRequest.data.response.data.length>0&&foodRequest.data.response.data[0].asset.clientNonce!==undefined?cryptography.decryptMessageWithPassphrase(cryptography.bufferToHex(foodRequest.data.response.data[0].asset.clientData),foodRequest.data.response.data[0].asset.clientNonce,passphrase,address):\"\";result={foodRequest:foodRequest,phone:clientData!==\"\"?clientData.split(' ***Field*** ')[1]:foodRequest.data.response.data[0].asset.phone,deliveryAddress:clientData!==\"\"?clientData.split(' ***Field*** ')[2]:foodRequest.data.response.data[0].asset.deliveryaddress,user:clientData!==\"\"?clientData.split(' ***Field*** ')[0]:foodRequest.data.response.data[0].asset.username,observation:clientData!==\"\"?clientData.split(' ***Field*** ')[3]:\"\"};_context.next=13;return onSubmit({result:result});case 13:setTransaction('');setPhone('');setPassphrase('');case 16:case\"end\":return _context.stop();}}},_callee);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/React.createElement(\"div\",{id:\"app\"},/*#__PURE__*/React.createElement(\"div\",{id:\"content\",align:\"center\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"input\",{type:\"hidden\",id:\"request_type\",name:\"request_type\"}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",null,\"Transaction id\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"transactionId\",name:\"transactionId\",required:true,onChange:function onChange(e){return setTransaction(e.target.value);}})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",null,\"Phone number\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"phone\",name:\"phone\",onChange:function onChange(e){return setPhone(e.target.value);}})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",null,\"Passphrase\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"password\",id:\"passphrase\",name:\"passphrase\",onChange:function onChange(e){return setPassphrase(e.target.value);}})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"Retrieve information of transaction requested\")))));}export default FormReservation;","map":{"version":3,"sources":["C:/PoC/restaurant_sidechain/web/src/components/FormReservation.js"],"names":["React","useState","useEffect","api","cryptography","require","FormReservation","onSubmit","transactionId","setTransaction","phone","setPhone","passphrase","setPassphrase","handleSubmit","e","preventDefault","address","getAddressFromPassphrase","post","foodRequest","console","log","data","response","length","asset","clientNonce","clientData","bufferToHex","undefined","decryptMessageWithPassphrase","result","split","deliveryAddress","deliveryaddress","user","username","observation","target","value"],"mappings":"udAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAO,eAAP,CACA,MAAOC,CAAAA,GAAP,KAAgB,iBAAhB,CAEA,GAAMC,CAAAA,YAAY,CAAGC,OAAO,CAAC,2BAAD,CAA5B,CAEA,QAASC,CAAAA,eAAT,MAAoC,IAAVC,CAAAA,QAAU,MAAVA,QAAU,eACQN,QAAQ,CAAC,EAAD,CADhB,wCACzBO,aADyB,eACVC,cADU,8BAENR,QAAQ,CAAC,EAAD,CAFF,yCAEzBS,KAFyB,eAElBC,QAFkB,8BAGIV,QAAQ,CAAC,EAAD,CAHZ,yCAGzBW,UAHyB,eAGbC,aAHa,uBAKjBC,CAAAA,YALiB,gJAKhC,iBAA4BC,CAA5B,4JACIA,CAAC,CAACC,cAAF,GAEMC,OAHV,CAGoBb,YAAY,CAACc,wBAAb,CAAsCN,UAAtC,CAHpB,uBAK4BT,CAAAA,GAAG,CAACgB,IAAJ,CAAS,cAAT,CAAyB,CAC7CX,aAAa,CAAbA,aAD6C,CAE7CE,KAAK,CAALA,KAF6C,CAG7CO,OAAO,CAAPA,OAH6C,CAAzB,CAL5B,QAKQG,WALR,eAWIC,OAAO,CAACC,GAAR,CAAYF,WAAW,CAACG,IAAZ,CAAiBC,QAAjB,CAA0BD,IAA1B,CAA+BE,MAA3C,EACAJ,OAAO,CAACC,GAAR,CAAYF,WAAW,CAACG,IAAZ,CAAiBC,QAAjB,CAA0BD,IAA1B,CAA+B,CAA/B,EAAkCG,KAAlC,CAAwCC,WAApD,EACAN,OAAO,CAACC,GAAR,CAAYF,WAAW,CAACG,IAAZ,CAAiBC,QAAjB,CAA0BD,IAA1B,CAA+B,CAA/B,EAAkCG,KAAlC,CAAwCE,UAApD,EACAP,OAAO,CAACC,GAAR,CAAYlB,YAAY,CAACyB,WAAb,CAAyBT,WAAW,CAACG,IAAZ,CAAiBC,QAAjB,CAA0BD,IAA1B,CAA+B,CAA/B,EAAkCG,KAAlC,CAAwCE,UAAjE,CAAZ,EAEIA,UAhBR,CAgBqBR,WAAW,CAACG,IAAZ,CAAiBC,QAAjB,CAA0BD,IAA1B,CAA+BE,MAA/B,CAAwC,CAAxC,EAA6CL,WAAW,CAACG,IAAZ,CAAiBC,QAAjB,CAA0BD,IAA1B,CAA+B,CAA/B,EAAkCG,KAAlC,CAAwCC,WAAxC,GAAwDG,SAArG,CAAiH1B,YAAY,CAAC2B,4BAAb,CAA0C3B,YAAY,CAACyB,WAAb,CAAyBT,WAAW,CAACG,IAAZ,CAAiBC,QAAjB,CAA0BD,IAA1B,CAA+B,CAA/B,EAAkCG,KAAlC,CAAwCE,UAAjE,CAA1C,CAAwHR,WAAW,CAACG,IAAZ,CAAiBC,QAAjB,CAA0BD,IAA1B,CAA+B,CAA/B,EAAkCG,KAAlC,CAAwCC,WAAhK,CAA6Kf,UAA7K,CAAyLK,OAAzL,CAAjH,CAAqT,EAhB1U,CAkBQe,MAlBR,CAkBiB,CAAGZ,WAAW,CAAEA,WAAhB,CACGV,KAAK,CAAEkB,UAAU,GAAK,EAAf,CAAoBA,UAAU,CAACK,KAAX,CAAiB,eAAjB,EAAkC,CAAlC,CAApB,CAA2Db,WAAW,CAACG,IAAZ,CAAiBC,QAAjB,CAA0BD,IAA1B,CAA+B,CAA/B,EAAkCG,KAAlC,CAAwChB,KAD7G,CAEGwB,eAAe,CAAEN,UAAU,GAAK,EAAf,CAAoBA,UAAU,CAACK,KAAX,CAAiB,eAAjB,EAAkC,CAAlC,CAApB,CAA2Db,WAAW,CAACG,IAAZ,CAAiBC,QAAjB,CAA0BD,IAA1B,CAA+B,CAA/B,EAAkCG,KAAlC,CAAwCS,eAFvH,CAGGC,IAAI,CAAER,UAAU,GAAK,EAAf,CAAoBA,UAAU,CAACK,KAAX,CAAiB,eAAjB,EAAkC,CAAlC,CAApB,CAA2Db,WAAW,CAACG,IAAZ,CAAiBC,QAAjB,CAA0BD,IAA1B,CAA+B,CAA/B,EAAkCG,KAAlC,CAAwCW,QAH5G,CAIGC,WAAW,CAAEV,UAAU,GAAK,EAAf,CAAoBA,UAAU,CAACK,KAAX,CAAiB,eAAjB,EAAkC,CAAlC,CAApB,CAA2D,EAJ3E,CAlBjB,wBAyBU1B,CAAAA,QAAQ,CAAC,CACXyB,MAAM,CAANA,MADW,CAAD,CAzBlB,SA6BIvB,cAAc,CAAC,EAAD,CAAd,CACAE,QAAQ,CAAC,EAAD,CAAR,CACAE,aAAa,CAAC,EAAD,CAAb,CA/BJ,uDALgC,+CAuChC,mBACI,2BAAK,EAAE,CAAC,KAAR,eACI,2BAAK,EAAE,CAAC,SAAR,CAAkB,KAAK,CAAC,QAAxB,eACI,4BAAM,QAAQ,CAAEC,YAAhB,eACI,6BAAO,IAAI,CAAC,QAAZ,CAAqB,EAAE,CAAC,cAAxB,CAAuC,IAAI,CAAC,cAA5C,EADJ,cAEI,4CACI,kDADJ,CAFJ,cAKI,4CACI,6BAAO,IAAI,CAAC,MAAZ,CAAmB,EAAE,CAAC,eAAtB,CAAsC,IAAI,CAAC,eAA3C,CAA2D,QAAQ,KAAnE,CAAoE,QAAQ,CAAE,kBAAAC,CAAC,QAAGN,CAAAA,cAAc,CAACM,CAAC,CAACwB,MAAF,CAASC,KAAV,CAAjB,EAA/E,EADJ,CALJ,cAQI,4CACI,gDADJ,CARJ,cAWI,4CACI,6BAAO,IAAI,CAAC,MAAZ,CAAmB,EAAE,CAAC,OAAtB,CAA8B,IAAI,CAAC,OAAnC,CAA2C,QAAQ,CAAE,kBAAAzB,CAAC,QAAGJ,CAAAA,QAAQ,CAACI,CAAC,CAACwB,MAAF,CAASC,KAAV,CAAX,EAAtD,EADJ,CAXJ,cAcI,4CACI,8CADJ,CAdJ,cAiBI,4CACI,6BAAO,IAAI,CAAC,UAAZ,CAAuB,EAAE,CAAC,YAA1B,CAAuC,IAAI,CAAC,YAA5C,CAAyD,QAAQ,CAAE,kBAAAzB,CAAC,QAAGF,CAAAA,aAAa,CAACE,CAAC,CAACwB,MAAF,CAASC,KAAV,CAAhB,EAApE,EADJ,CAjBJ,cAoBI,4CACI,8BAAQ,IAAI,CAAC,QAAb,kDADJ,CApBJ,CADJ,CADJ,CADJ,CA8BH,CAED,cAAelC,CAAAA,eAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport '../styles.css';\r\nimport api from '../services/api';\r\n\r\nconst cryptography = require('@liskhq/lisk-cryptography');\r\n\r\nfunction FormReservation({onSubmit}){    \r\n    const [transactionId, setTransaction] = useState('');\r\n    const [phone, setPhone] = useState('');\r\n    const [passphrase, setPassphrase] = useState('');\r\n\r\n    async function handleSubmit(e){\r\n        e.preventDefault();\r\n        \r\n        const address = cryptography.getAddressFromPassphrase(passphrase);\r\n\r\n        var foodRequest = await api.post('/transaction', {\r\n            transactionId,\r\n            phone,\r\n            address\r\n        });        \r\n\r\n        console.log(foodRequest.data.response.data.length);\r\n        console.log(foodRequest.data.response.data[0].asset.clientNonce);\r\n        console.log(foodRequest.data.response.data[0].asset.clientData);\r\n        console.log(cryptography.bufferToHex(foodRequest.data.response.data[0].asset.clientData));\r\n\r\n        var clientData = foodRequest.data.response.data.length > 0 && foodRequest.data.response.data[0].asset.clientNonce !== undefined ? cryptography.decryptMessageWithPassphrase(cryptography.bufferToHex(foodRequest.data.response.data[0].asset.clientData), foodRequest.data.response.data[0].asset.clientNonce, passphrase, address) : \"\";        \r\n\r\n        var result = {  foodRequest: foodRequest,\r\n                        phone: clientData !== \"\" ? clientData.split(' ***Field*** ')[1] : foodRequest.data.response.data[0].asset.phone,\r\n                        deliveryAddress: clientData !== \"\" ? clientData.split(' ***Field*** ')[2] : foodRequest.data.response.data[0].asset.deliveryaddress,\r\n                        user: clientData !== \"\" ? clientData.split(' ***Field*** ')[0] : foodRequest.data.response.data[0].asset.username,\r\n                        observation: clientData !== \"\" ? clientData.split(' ***Field*** ')[3] : \"\"\r\n                    };        \r\n\r\n        await onSubmit({\r\n            result\r\n        });\r\n        \r\n        setTransaction('');\r\n        setPhone('');\r\n        setPassphrase('');\r\n    }\r\n\r\n    return (\r\n        <div id=\"app\">\r\n            <div id=\"content\" align=\"center\">                \r\n                <form onSubmit={handleSubmit}>\r\n                    <input type=\"hidden\" id=\"request_type\" name=\"request_type\"></input>                \r\n                    <div>\r\n                        <label>Transaction id</label>\r\n                    </div>\r\n                    <div>\r\n                        <input type=\"text\" id=\"transactionId\" name=\"transactionId\" required onChange={e=> setTransaction(e.target.value)}/>\r\n                    </div>\r\n                    <div>\r\n                        <label>Phone number</label>\r\n                    </div>\r\n                    <div>\r\n                        <input type=\"text\" id=\"phone\" name=\"phone\" onChange={e=> setPhone(e.target.value)}/>\r\n                    </div>     \r\n                    <div>\r\n                        <label>Passphrase</label>\r\n                    </div>\r\n                    <div>\r\n                        <input type=\"password\" id=\"passphrase\" name=\"passphrase\" onChange={e=> setPassphrase(e.target.value)}/>\r\n                    </div>               \r\n                    <div>\r\n                        <button type=\"submit\">Retrieve information of transaction requested</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FormReservation;"]},"metadata":{},"sourceType":"module"}