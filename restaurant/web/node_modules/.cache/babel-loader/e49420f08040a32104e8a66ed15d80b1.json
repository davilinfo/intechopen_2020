{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\PoC\\\\restaurant_sidechain\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\PoC\\\\restaurant_sidechain\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\PoC\\\\restaurant_sidechain\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'../styles.css';import api from'../services/api';var cryptography=require('@liskhq/lisk-cryptography');function FormReservation(_ref){var onSubmit=_ref.onSubmit;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),transactionId=_useState2[0],setTransaction=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),phone=_useState4[0],setPhone=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),passphrase=_useState6[0],setPassphrase=_useState6[1];function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var address,publicKey,foodRequest,clientData,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();address=cryptography.getAddressAndPublicKeyFromPassphrase(passphrase).address;publicKey=cryptography.getAddressAndPublicKeyFromPassphrase(passphrase).publicKey;_context.next=5;return api.post('/transaction',{transactionId:transactionId,phone:phone,address:address});case 5:foodRequest=_context.sent;clientData=\"\";result=\"\";try{clientData=foodRequest.data.response.data.length>0&&foodRequest.data.response.data[0].asset.clientNonce!==undefined?cryptography.decryptMessageWithPassphrase(foodRequest.data.response.data[0].asset.clientData,foodRequest.data.response.data[0].asset.clientNonce,passphrase,publicKey):\"\";result={foodRequest:foodRequest,phone:clientData!==\"\"?clientData.split(' ***Field*** ')[1]:foodRequest.data.response.data[0].asset.phone,deliveryAddress:clientData!==\"\"?clientData.split(' ***Field*** ')[2]:foodRequest.data.response.data[0].asset.deliveryaddress,user:clientData!==\"\"?clientData.split(' ***Field*** ')[0]:foodRequest.data.response.data[0].asset.username,observation:clientData!==\"\"?clientData.split(' ***Field*** ')[3]:\"\"};}catch(e){alert(\"Something wrong with this search data\");result={foodRequest:foodRequest,phone:\"***\",deliveryAddress:\"***\",user:\"***\",observation:\"***\"};}_context.next=11;return onSubmit({result:result});case 11:setTransaction('');setPhone('');setPassphrase('');case 14:case\"end\":return _context.stop();}}},_callee);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/React.createElement(\"div\",{id:\"app\"},/*#__PURE__*/React.createElement(\"div\",{id:\"content\",align:\"center\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"input\",{type:\"hidden\",id:\"request_type\",name:\"request_type\"}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",null,\"Transaction id\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"transactionId\",name:\"transactionId\",required:true,onChange:function onChange(e){return setTransaction(e.target.value);}})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",null,\"Phone number\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"phone\",name:\"phone\",onChange:function onChange(e){return setPhone(e.target.value);}})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",null,\"Passphrase\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"password\",id:\"passphrase\",name:\"passphrase\",onChange:function onChange(e){return setPassphrase(e.target.value);}})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"Retrieve information of transaction requested\")))));}export default FormReservation;","map":{"version":3,"sources":["C:/PoC/restaurant_sidechain/web/src/components/FormReservation.js"],"names":["React","useState","useEffect","api","cryptography","require","FormReservation","onSubmit","transactionId","setTransaction","phone","setPhone","passphrase","setPassphrase","handleSubmit","e","preventDefault","address","getAddressAndPublicKeyFromPassphrase","publicKey","post","foodRequest","clientData","result","data","response","length","asset","clientNonce","undefined","decryptMessageWithPassphrase","split","deliveryAddress","deliveryaddress","user","username","observation","alert","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport '../styles.css';\r\nimport api from '../services/api';\r\n\r\nconst cryptography = require('@liskhq/lisk-cryptography');\r\n\r\nfunction FormReservation({onSubmit}){    \r\n    const [transactionId, setTransaction] = useState('');\r\n    const [phone, setPhone] = useState('');\r\n    const [passphrase, setPassphrase] = useState('');\r\n\r\n    async function handleSubmit(e){\r\n        e.preventDefault();\r\n                \r\n        const address = cryptography.getAddressAndPublicKeyFromPassphrase(passphrase).address;\r\n        const publicKey = cryptography.getAddressAndPublicKeyFromPassphrase(passphrase).publicKey;\r\n\r\n        var foodRequest = await api.post('/transaction', {\r\n            transactionId,\r\n            phone,\r\n            address\r\n        });                          \r\n\r\n        var clientData = \"\";\r\n        var result = \"\";         \r\n        \r\n        try{\r\n            clientData = foodRequest.data.response.data.length > 0 && foodRequest.data.response.data[0].asset.clientNonce !== undefined ? cryptography.decryptMessageWithPassphrase(foodRequest.data.response.data[0].asset.clientData, foodRequest.data.response.data[0].asset.clientNonce, passphrase, publicKey) : \"\";\r\n            result = {  foodRequest: foodRequest,\r\n                phone: clientData !== \"\" ? clientData.split(' ***Field*** ')[1] : foodRequest.data.response.data[0].asset.phone,\r\n                deliveryAddress: clientData !== \"\" ? clientData.split(' ***Field*** ')[2] : foodRequest.data.response.data[0].asset.deliveryaddress,\r\n                user: clientData !== \"\" ? clientData.split(' ***Field*** ')[0] : foodRequest.data.response.data[0].asset.username,\r\n                observation: clientData !== \"\" ? clientData.split(' ***Field*** ')[3] : \"\"\r\n            };\r\n        }catch (e){\r\n            alert(\"Something wrong with this search data\");\r\n            result = {  foodRequest: foodRequest,\r\n                phone: \"***\",\r\n                deliveryAddress: \"***\",\r\n                user: \"***\",\r\n                observation: \"***\"\r\n            };\r\n        }             \r\n\r\n        await onSubmit({\r\n            result\r\n        });\r\n        \r\n        setTransaction('');\r\n        setPhone('');\r\n        setPassphrase('');\r\n    }\r\n\r\n    return (\r\n        <div id=\"app\">\r\n            <div id=\"content\" align=\"center\">                \r\n                <form onSubmit={handleSubmit}>\r\n                    <input type=\"hidden\" id=\"request_type\" name=\"request_type\"></input>                \r\n                    <div>\r\n                        <label>Transaction id</label>\r\n                    </div>\r\n                    <div>\r\n                        <input type=\"text\" id=\"transactionId\" name=\"transactionId\" required onChange={e=> setTransaction(e.target.value)}/>\r\n                    </div>\r\n                    <div>\r\n                        <label>Phone number</label>\r\n                    </div>\r\n                    <div>\r\n                        <input type=\"text\" id=\"phone\" name=\"phone\" onChange={e=> setPhone(e.target.value)}/>\r\n                    </div>     \r\n                    <div>\r\n                        <label>Passphrase</label>\r\n                    </div>\r\n                    <div>\r\n                        <input type=\"password\" id=\"passphrase\" name=\"passphrase\" onChange={e=> setPassphrase(e.target.value)}/>\r\n                    </div>               \r\n                    <div>\r\n                        <button type=\"submit\">Retrieve information of transaction requested</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FormReservation;"]},"metadata":{},"sourceType":"module"}